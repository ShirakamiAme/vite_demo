{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport '../../assets/css/SiteHeader.css';\nexport default {\n  __name: 'SiteHeader',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const LoginStatus = ref(false);\n    const username = ref('游客');\n    const showLogoutConfirm = ref(false);\n    onMounted(() => {\n      const userJson = localStorage.getItem('user');\n      if (userJson) {\n        try {\n          const user = JSON.parse(userJson);\n          if (user && user.user_name) {\n            username.value = user.user_name;\n            LoginStatus.value = true;\n          }\n        } catch (e) {\n          console.error('解析用户数据失败', e);\n        }\n      }\n    });\n    function toggleLogoutConfirm() {\n      if (LoginStatus.value) {\n        showLogoutConfirm.value = !showLogoutConfirm.value;\n      }\n    }\n    function handleUserIconClick() {\n      if (LoginStatus.value) {\n        localStorage.setItem('user', JSON.stringify({\n          user_id: userData.user_id,\n          user_name: userData.user_name,\n          email: userData.email\n        }));\n        toggleLogoutConfirm();\n      } else {\n        window.location.href = '/login';\n      }\n    }\n    function logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('authToken');\n      username.value = '游客';\n      LoginStatus.value = false;\n      showLogoutConfirm.value = false;\n      window.location.href = '/';\n    }\n    const __returned__ = {\n      LoginStatus,\n      username,\n      showLogoutConfirm,\n      toggleLogoutConfirm,\n      handleUserIconClick,\n      logout,\n      ref,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","LoginStatus","username","showLogoutConfirm","userJson","localStorage","getItem","user","JSON","parse","user_name","value","e","console","error","toggleLogoutConfirm","handleUserIconClick","setItem","stringify","user_id","userData","email","window","location","href","logout","removeItem"],"sources":["D:/计算机/谭/shopping_website/src/components/layout/SiteHeader.vue"],"sourcesContent":["<template>\r\n  <header>\r\n    <div class=\"container header-content\">\r\n      <a href=\"/\" class=\"logo\">\r\n        <font-awesome-icon :icon=\"['fas', 'leaf']\" />\r\n        <span>绿意生活</span>\r\n      </a>\r\n\r\n      <!--form标签的功能暂时不用实现-->\r\n      <form class=\"search\">\r\n        <button type=\"submit\" class=\"search__button\">\r\n          <div class=\"search__icon\">\r\n            <!-- 图标1 -->\r\n          </div>\r\n        </button>\r\n        <input\r\n            type=\"text\"\r\n            class=\"search__input\"\r\n            placeholder=\"搜索商品...\"\r\n            aria-label=\"搜索商品\"\r\n        />\r\n        <button class=\"mic__button\" type=\"button\">\r\n          <div class=\"mic__icon\">\r\n            <!-- 图标2 -->\r\n          </div>\r\n        </button>\r\n        <button class=\"picture__button\" type=\"button\">\r\n          <div class=\"picture__icon\">\r\n            <!-- 图标3 -->\r\n          </div>\r\n        </button>\r\n      </form>\r\n\r\n      <div class=\"nav-icons\">\r\n        <a\r\n            href=\"#\"\r\n            class=\"nav-icon\"\r\n            :class=\"LoginStatus ? 'logged_in' : 'not_logged_in'\"\r\n            @click.prevent=\"handleUserIconClick\"\r\n        >\r\n          <font-awesome-icon :icon=\"['fas', 'user']\" />\r\n          <span>{{ username }}</span>\r\n        </a>\r\n\r\n        <div v-if=\"showLogoutConfirm\" class=\"logout-confirm-popup\">\r\n          <p>确定要退出登录吗？</p>\r\n          <div class=\"popup-buttons\">\r\n            <button class=\"confirm-btn\" @click=\"logout\">确认退出</button>\r\n            <button class=\"cancel-btn\" @click=\"showLogoutConfirm = false\">取消</button>\r\n          </div>\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"nav-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'heart']\" />\r\n        </a>\r\n\r\n        <a href=\"/shoppingcart\" class=\"nav-icon cart-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'shopping-cart']\" />\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport '../../assets/css/SiteHeader.css'\r\n\r\nconst LoginStatus = ref(false)\r\nconst username = ref('游客')\r\nconst showLogoutConfirm = ref(false)\r\n\r\nonMounted(() => {\r\n  const userJson = localStorage.getItem('user')\r\n  if (userJson) {\r\n    try {\r\n      const user = JSON.parse(userJson)\r\n      if (user && user.user_name) {\r\n        username.value = user.user_name\r\n        LoginStatus.value = true\r\n      }\r\n    } catch (e) {\r\n      console.error('解析用户数据失败', e)\r\n    }\r\n  }\r\n})\r\n\r\nfunction toggleLogoutConfirm() {\r\n  if (LoginStatus.value) {\r\n    showLogoutConfirm.value = !showLogoutConfirm.value\r\n  }\r\n}\r\n\r\nfunction handleUserIconClick() {\r\n  if (LoginStatus.value) {\r\n    localStorage.setItem('user', JSON.stringify({\r\n      user_id: userData.user_id,\r\n      user_name: userData.user_name,\r\n      email: userData.email\r\n    }));\r\n    toggleLogoutConfirm()\r\n  } else {\r\n    window.location.href = '/login'\r\n  }\r\n}\r\n\r\n\r\nfunction logout() {\r\n  localStorage.removeItem('user')\r\n  localStorage.removeItem('authToken')\r\n  username.value = '游客'\r\n  LoginStatus.value = false\r\n  showLogoutConfirm.value = false\r\n  window.location.href = '/'\r\n}\r\n</script>\r\n\r\n"],"mappings":"AAiEA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAO,iCAAiC;;;;;;;IAExC,MAAMC,WAAW,GAAGF,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMG,QAAQ,GAAGH,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMI,iBAAiB,GAAGJ,GAAG,CAAC,KAAK,CAAC;IAEpCC,SAAS,CAAC,MAAM;MACd,MAAMI,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAC7C,IAAIF,QAAQ,EAAE;QACZ,IAAI;UACF,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,QAAQ,CAAC;UACjC,IAAIG,IAAI,IAAIA,IAAI,CAACG,SAAS,EAAE;YAC1BR,QAAQ,CAACS,KAAK,GAAGJ,IAAI,CAACG,SAAS;YAC/BT,WAAW,CAACU,KAAK,GAAG,IAAI;UAC1B;QACF,CAAC,CAAC,OAAOC,CAAC,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,UAAU,EAAEF,CAAC,CAAC;QAC9B;MACF;IACF,CAAC,CAAC;IAEF,SAASG,mBAAmBA,CAAA,EAAG;MAC7B,IAAId,WAAW,CAACU,KAAK,EAAE;QACrBR,iBAAiB,CAACQ,KAAK,GAAG,CAACR,iBAAiB,CAACQ,KAAK;MACpD;IACF;IAEA,SAASK,mBAAmBA,CAAA,EAAG;MAC7B,IAAIf,WAAW,CAACU,KAAK,EAAE;QACrBN,YAAY,CAACY,OAAO,CAAC,MAAM,EAAET,IAAI,CAACU,SAAS,CAAC;UAC1CC,OAAO,EAAEC,QAAQ,CAACD,OAAO;UACzBT,SAAS,EAAEU,QAAQ,CAACV,SAAS;UAC7BW,KAAK,EAAED,QAAQ,CAACC;QAClB,CAAC,CAAC,CAAC;QACHN,mBAAmB,CAAC,CAAC;MACvB,CAAC,MAAM;QACLO,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;MACjC;IACF;IAGA,SAASC,MAAMA,CAAA,EAAG;MAChBpB,YAAY,CAACqB,UAAU,CAAC,MAAM,CAAC;MAC/BrB,YAAY,CAACqB,UAAU,CAAC,WAAW,CAAC;MACpCxB,QAAQ,CAACS,KAAK,GAAG,IAAI;MACrBV,WAAW,CAACU,KAAK,GAAG,KAAK;MACzBR,iBAAiB,CAACQ,KAAK,GAAG,KAAK;MAC/BW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}