{"ast":null,"code":"import { ref } from 'vue';\nexport function useUserStore() {\n  // 状态\n  const isLoggedIn = ref(false);\n  const username = ref('');\n  const userEmail = ref('');\n  const cartCount = ref(0);\n\n  // 登录：更新状态并持久化\n  function login(userData) {\n    isLoggedIn.value = true;\n    username.value = userData.username || '';\n    userEmail.value = userData.email || '';\n    cartCount.value = userData.cartCount || cartCount.value;\n    saveUserState();\n  }\n\n  // 登出：清除状态和本地存储\n  function logout() {\n    isLoggedIn.value = false;\n    username.value = '';\n    userEmail.value = '';\n    cartCount.value = 0;\n    localStorage.removeItem('userState');\n    localStorage.removeItem('token');\n  }\n\n  // 持久化当前状态到 localStorage\n  function saveUserState() {\n    localStorage.setItem('userState', JSON.stringify({\n      isLoggedIn: isLoggedIn.value,\n      username: username.value,\n      userEmail: userEmail.value,\n      cartCount: cartCount.value,\n      lastLogin: new Date().toISOString()\n    }));\n  }\n  return {\n    // 状态\n    isLoggedIn,\n    username,\n    userEmail,\n    cartCount,\n    // 方法\n    login,\n    logout\n  };\n}","map":{"version":3,"names":["ref","useUserStore","isLoggedIn","username","userEmail","cartCount","login","userData","value","email","saveUserState","logout","localStorage","removeItem","setItem","JSON","stringify","lastLogin","Date","toISOString"],"sources":["D:/计算机/谭/shopping_website/src/composables/useUserStore.js"],"sourcesContent":["import { ref } from 'vue';\r\n\r\nexport function useUserStore() {\r\n    // 状态\r\n    const isLoggedIn = ref(false);\r\n    const username = ref('');\r\n    const userEmail = ref('');\r\n    const cartCount = ref(0);\r\n\r\n    // 登录：更新状态并持久化\r\n    function login(userData) {\r\n        isLoggedIn.value = true;\r\n        username.value = userData.username || '';\r\n        userEmail.value = userData.email || '';\r\n        cartCount.value = userData.cartCount || cartCount.value;\r\n\r\n        saveUserState();\r\n    }\r\n\r\n    // 登出：清除状态和本地存储\r\n    function logout() {\r\n        isLoggedIn.value = false;\r\n        username.value = '';\r\n        userEmail.value = '';\r\n        cartCount.value = 0;\r\n\r\n        localStorage.removeItem('userState');\r\n        localStorage.removeItem('token');\r\n    }\r\n\r\n    // 持久化当前状态到 localStorage\r\n    function saveUserState() {\r\n        localStorage.setItem('userState', JSON.stringify({\r\n            isLoggedIn: isLoggedIn.value,\r\n            username: username.value,\r\n            userEmail: userEmail.value,\r\n            cartCount: cartCount.value,\r\n            lastLogin: new Date().toISOString()\r\n        }));\r\n    }\r\n\r\n    return {\r\n        // 状态\r\n        isLoggedIn,\r\n        username,\r\n        userEmail,\r\n        cartCount,\r\n\r\n        // 方法\r\n        login,\r\n        logout\r\n    };\r\n}\r\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,KAAK;AAEzB,OAAO,SAASC,YAAYA,CAAA,EAAG;EAC3B;EACA,MAAMC,UAAU,GAAGF,GAAG,CAAC,KAAK,CAAC;EAC7B,MAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;EACxB,MAAMI,SAAS,GAAGJ,GAAG,CAAC,EAAE,CAAC;EACzB,MAAMK,SAAS,GAAGL,GAAG,CAAC,CAAC,CAAC;;EAExB;EACA,SAASM,KAAKA,CAACC,QAAQ,EAAE;IACrBL,UAAU,CAACM,KAAK,GAAG,IAAI;IACvBL,QAAQ,CAACK,KAAK,GAAGD,QAAQ,CAACJ,QAAQ,IAAI,EAAE;IACxCC,SAAS,CAACI,KAAK,GAAGD,QAAQ,CAACE,KAAK,IAAI,EAAE;IACtCJ,SAAS,CAACG,KAAK,GAAGD,QAAQ,CAACF,SAAS,IAAIA,SAAS,CAACG,KAAK;IAEvDE,aAAa,CAAC,CAAC;EACnB;;EAEA;EACA,SAASC,MAAMA,CAAA,EAAG;IACdT,UAAU,CAACM,KAAK,GAAG,KAAK;IACxBL,QAAQ,CAACK,KAAK,GAAG,EAAE;IACnBJ,SAAS,CAACI,KAAK,GAAG,EAAE;IACpBH,SAAS,CAACG,KAAK,GAAG,CAAC;IAEnBI,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;IACpCD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;EACpC;;EAEA;EACA,SAASH,aAAaA,CAAA,EAAG;IACrBE,YAAY,CAACE,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAAC;MAC7Cd,UAAU,EAAEA,UAAU,CAACM,KAAK;MAC5BL,QAAQ,EAAEA,QAAQ,CAACK,KAAK;MACxBJ,SAAS,EAAEA,SAAS,CAACI,KAAK;MAC1BH,SAAS,EAAEA,SAAS,CAACG,KAAK;MAC1BS,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;IACtC,CAAC,CAAC,CAAC;EACP;EAEA,OAAO;IACH;IACAjB,UAAU;IACVC,QAAQ;IACRC,SAAS;IACTC,SAAS;IAET;IACAC,KAAK;IACLK;EACJ,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}