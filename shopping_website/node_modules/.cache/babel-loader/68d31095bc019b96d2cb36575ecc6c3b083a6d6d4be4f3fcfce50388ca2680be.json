{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container header-content\"\n};\nconst _hoisted_2 = {\n  href: \"/\",\n  class: \"logo\"\n};\nconst _hoisted_3 = {\n  class: \"nav-icons\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"logout-confirm-popup\"\n};\nconst _hoisted_5 = {\n  class: \"popup-buttons\"\n};\nconst _hoisted_6 = {\n  href: \"#\",\n  class: \"nav-icon\"\n};\nconst _hoisted_7 = {\n  href: \"/shoppingcart\",\n  class: \"nav-icon cart-icon\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return _openBlock(), _createElementBlock(\"header\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"a\", _hoisted_2, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'leaf']\n  }), _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"绿意生活\", -1 /* HOISTED */))]), _createCommentVNode(\"form标签的功能暂时不用实现\"), _cache[3] || (_cache[3] = _createStaticVNode(\"<form class=\\\"search\\\"><button type=\\\"submit\\\" class=\\\"search__button\\\"><div class=\\\"search__icon\\\"><!-- 图标1 --></div></button><input type=\\\"text\\\" class=\\\"search__input\\\" placeholder=\\\"搜索商品...\\\" aria-label=\\\"搜索商品\\\"><button class=\\\"mic__button\\\" type=\\\"button\\\"><div class=\\\"mic__icon\\\"><!-- 图标2 --></div></button><button class=\\\"picture__button\\\" type=\\\"button\\\"><div class=\\\"picture__icon\\\"><!-- 图标3 --></div></button></form>\", 1)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"a\", {\n    href: \"#\",\n    class: _normalizeClass([\"nav-icon\", $setup.LoginStatus ? 'logged_in' : 'not_logged_in']),\n    onClick: _withModifiers($setup.handleUserIconClick, [\"prevent\"])\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'user']\n  }), _createElementVNode(\"span\", null, _toDisplayString($setup.username), 1 /* TEXT */)], 2 /* CLASS */), $setup.showLogoutConfirm ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", null, \"确定要退出登录吗？\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    class: \"confirm-btn\",\n    onClick: $setup.logout\n  }, \"确认退出\"), _createElementVNode(\"button\", {\n    class: \"cancel-btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.showLogoutConfirm = false)\n  }, \"取消\")])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"a\", _hoisted_6, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'heart']\n  })]), _createElementVNode(\"a\", _hoisted_7, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'shopping-cart']\n  })])])])]);\n}","map":{"version":3,"names":["class","href","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_font_awesome_icon","icon","_createCommentVNode","_hoisted_3","_normalizeClass","$setup","LoginStatus","onClick","_withModifiers","handleUserIconClick","_toDisplayString","username","showLogoutConfirm","_hoisted_4","_hoisted_5","logout","_cache","$event","_hoisted_6","_hoisted_7"],"sources":["D:\\计算机\\谭\\shopping_website\\src\\components\\layout\\SiteHeader.vue"],"sourcesContent":["<template>\r\n  <header>\r\n    <div class=\"container header-content\">\r\n      <a href=\"/\" class=\"logo\">\r\n        <font-awesome-icon :icon=\"['fas', 'leaf']\" />\r\n        <span>绿意生活</span>\r\n      </a>\r\n\r\n      <!--form标签的功能暂时不用实现-->\r\n      <form class=\"search\">\r\n        <button type=\"submit\" class=\"search__button\">\r\n          <div class=\"search__icon\">\r\n            <!-- 图标1 -->\r\n          </div>\r\n        </button>\r\n        <input\r\n            type=\"text\"\r\n            class=\"search__input\"\r\n            placeholder=\"搜索商品...\"\r\n            aria-label=\"搜索商品\"\r\n        />\r\n        <button class=\"mic__button\" type=\"button\">\r\n          <div class=\"mic__icon\">\r\n            <!-- 图标2 -->\r\n          </div>\r\n        </button>\r\n        <button class=\"picture__button\" type=\"button\">\r\n          <div class=\"picture__icon\">\r\n            <!-- 图标3 -->\r\n          </div>\r\n        </button>\r\n      </form>\r\n\r\n      <div class=\"nav-icons\">\r\n        <a\r\n            href=\"#\"\r\n            class=\"nav-icon\"\r\n            :class=\"LoginStatus ? 'logged_in' : 'not_logged_in'\"\r\n            @click.prevent=\"handleUserIconClick\"\r\n        >\r\n          <font-awesome-icon :icon=\"['fas', 'user']\" />\r\n          <span>{{ username }}</span>\r\n        </a>\r\n\r\n        <div v-if=\"showLogoutConfirm\" class=\"logout-confirm-popup\">\r\n          <p>确定要退出登录吗？</p>\r\n          <div class=\"popup-buttons\">\r\n            <button class=\"confirm-btn\" @click=\"logout\">确认退出</button>\r\n            <button class=\"cancel-btn\" @click=\"showLogoutConfirm = false\">取消</button>\r\n          </div>\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"nav-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'heart']\" />\r\n        </a>\r\n\r\n        <a href=\"/shoppingcart\" class=\"nav-icon cart-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'shopping-cart']\" />\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport '../../assets/css/SiteHeader.css'\r\n\r\nconst LoginStatus = ref(false)\r\nconst username = ref('游客')\r\nconst showLogoutConfirm = ref(false)\r\n\r\nonMounted(() => {\r\n  const userJson = localStorage.getItem('user')\r\n  if (userJson) {\r\n    try {\r\n      const user = JSON.parse(userJson)\r\n      if (user && user.user_name) {\r\n        username.value = user.user_name\r\n        LoginStatus.value = true\r\n      }\r\n    } catch (e) {\r\n      console.error('解析用户数据失败', e)\r\n    }\r\n  }\r\n})\r\n\r\nfunction toggleLogoutConfirm() {\r\n  if (LoginStatus.value) {\r\n    showLogoutConfirm.value = !showLogoutConfirm.value\r\n  }\r\n}\r\n\r\nfunction handleUserIconClick() {\r\n  if (LoginStatus.value) {\r\n    localStorage.setItem('user', JSON.stringify({\r\n      user_id: userData.user_id,\r\n      user_name: userData.user_name,\r\n      email: userData.email\r\n    }));\r\n    toggleLogoutConfirm()\r\n  } else {\r\n    window.location.href = '/login'\r\n  }\r\n}\r\n\r\n\r\nfunction logout() {\r\n  localStorage.removeItem('user')\r\n  localStorage.removeItem('authToken')\r\n  username.value = '游客'\r\n  LoginStatus.value = false\r\n  showLogoutConfirm.value = false\r\n  window.location.href = '/'\r\n}\r\n</script>\r\n\r\n"],"mappings":";;EAESA,KAAK,EAAC;AAA0B;;EAChCC,IAAI,EAAC,GAAG;EAACD,KAAK,EAAC;;;EA8BbA,KAAK,EAAC;AAAW;;;EAWUA,KAAK,EAAC;;;EAE7BA,KAAK,EAAC;AAAe;;EAMzBC,IAAI,EAAC,GAAG;EAACD,KAAK,EAAC;;;EAIfC,IAAI,EAAC,eAAe;EAACD,KAAK,EAAC;;;;uBAvDpCE,mBAAA,CA4DS,iBA3DPC,mBAAA,CA0DM,OA1DNC,UA0DM,GAzDJD,mBAAA,CAGI,KAHJE,UAGI,GAFFC,YAAA,CAA6CC,4BAAA;IAAzBC,IAAI,EAAE;EAAe,I,0BACzCL,mBAAA,CAAiB,cAAX,MAAI,qB,GAGZM,mBAAA,mBAAsB,E,ieAyBtBN,mBAAA,CA0BM,OA1BNO,UA0BM,GAzBJP,mBAAA,CAQI;IAPAF,IAAI,EAAC,GAAG;IACRD,KAAK,EAAAW,eAAA,EAAC,UAAU,EACRC,MAAA,CAAAC,WAAW;IAClBC,OAAK,EAAAC,cAAA,CAAUH,MAAA,CAAAI,mBAAmB;MAErCV,YAAA,CAA6CC,4BAAA;IAAzBC,IAAI,EAAE;EAAe,IACzCL,mBAAA,CAA2B,cAAAc,gBAAA,CAAlBL,MAAA,CAAAM,QAAQ,iB,kBAGRN,MAAA,CAAAO,iBAAiB,I,cAA5BjB,mBAAA,CAMM,OANNkB,UAMM,G,0BALJjB,mBAAA,CAAgB,WAAb,WAAS,sBACZA,mBAAA,CAGM,OAHNkB,UAGM,GAFJlB,mBAAA,CAAyD;IAAjDH,KAAK,EAAC,aAAa;IAAEc,OAAK,EAAEF,MAAA,CAAAU;KAAQ,MAAI,GAChDnB,mBAAA,CAAyE;IAAjEH,KAAK,EAAC,YAAY;IAAEc,OAAK,EAAAS,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEZ,MAAA,CAAAO,iBAAiB;KAAU,IAAE,E,0CAIpEhB,mBAAA,CAEI,KAFJsB,UAEI,GADFnB,YAAA,CAA8CC,4BAAA;IAA1BC,IAAI,EAAE;EAAgB,G,GAG5CL,mBAAA,CAEI,KAFJuB,UAEI,GADFpB,YAAA,CAAsDC,4BAAA;IAAlCC,IAAI,EAAE;EAAwB,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}