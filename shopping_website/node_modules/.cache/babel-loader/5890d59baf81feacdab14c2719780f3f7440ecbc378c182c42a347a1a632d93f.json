{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"shopping-cart\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"cart-list\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"product-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"购物车\", -1 /* HOISTED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"加载中...\")) : $setup.cartItems.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"购物车空空如也\")) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cartItems, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.cart_id,\n      class: \"cart-item\"\n    }, [_createElementVNode(\"img\", {\n      src: item.product_image,\n      alt: \"商品图\",\n      class: \"product-image\"\n    }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h3\", null, _toDisplayString(item.product_name), 1 /* TEXT */), _createElementVNode(\"p\", null, \"单价: ¥\" + _toDisplayString(item.product_price.toFixed(2)), 1 /* TEXT */), _createElementVNode(\"p\", null, \"数量: \" + _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"p\", null, \"小计: ¥\" + _toDisplayString((item.product_price * item.quantity).toFixed(2)), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))]))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$setup","loading","_hoisted_2","cartItems","length","_hoisted_3","_hoisted_4","_Fragment","_renderList","item","key","cart_id","src","product_image","alt","_hoisted_6","_toDisplayString","product_name","product_price","toFixed","quantity"],"sources":["D:\\计算机\\谭\\shopping_website\\src\\views\\ShoppingCart.vue"],"sourcesContent":["<template>\r\n  <div class=\"shopping-cart\">\r\n    <h2>购物车</h2>\r\n    <div v-if=\"loading\">加载中...</div>\r\n    <div v-else-if=\"cartItems.length === 0\">购物车空空如也</div>\r\n    <ul v-else class=\"cart-list\">\r\n      <li v-for=\"item in cartItems\" :key=\"item.cart_id\" class=\"cart-item\">\r\n        <img :src=\"item.product_image\" alt=\"商品图\" class=\"product-image\" />\r\n        <div class=\"product-info\">\r\n          <h3>{{ item.product_name }}</h3>\r\n          <p>单价: ¥{{ item.product_price.toFixed(2) }}</p>\r\n          <p>数量: {{ item.quantity }}</p>\r\n          <p>小计: ¥{{ (item.product_price * item.quantity).toFixed(2) }}</p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { fetchCartByUserId } from '@/api/cart.js';\r\n\r\nconst cartItems = ref([]);\r\nconst loading = ref(false);\r\n\r\nonMounted(async () => {\r\n  const userJson = localStorage.getItem('user');\r\n  if (!userJson) {\r\n    alert('请先登录');\r\n    window.location.href = '/login';\r\n    return;\r\n  }\r\n  try {\r\n    const user = JSON.parse(userJson);\r\n    if (user && user.user_id) {\r\n      loading.value = true;\r\n      const res = await fetchCartByUserId(user.user_id);\r\n      if (res.status === 200 && res.data.status === 'success') {\r\n        cartItems.value = res.data.data;  // 期待后端返回数组\r\n      } else {\r\n        alert(res.data.message || '获取购物车失败');\r\n      }\r\n    } else {\r\n      alert('用户信息错误，请重新登录');\r\n      window.location.href = '/login';\r\n    }\r\n  } catch (e) {\r\n    console.error('解析用户数据失败', e);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* 你已有样式，这里简单示例 */\r\n.shopping-cart { padding: 20px; }\r\n.cart-list { list-style: none; padding: 0; }\r\n.cart-item { display: flex; margin-bottom: 10px; }\r\n.product-image { width: 80px; height: 80px; object-fit: cover; margin-right: 10px; }\r\n.product-info h3 { margin: 0 0 5px 0; }\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAe;;;;;;;;;EAIbA,KAAK,EAAC;;;;EAGRA,KAAK,EAAC;AAAc;;uBAP/BC,mBAAA,CAeM,OAfNC,UAeM,G,0BAdJC,mBAAA,CAAY,YAAR,KAAG,sBACIC,MAAA,CAAAC,OAAO,I,cAAlBJ,mBAAA,CAAgC,OAAAK,UAAA,EAAZ,QAAM,KACVF,MAAA,CAAAG,SAAS,CAACC,MAAM,U,cAAhCP,mBAAA,CAAqD,OAAAQ,UAAA,EAAb,SAAO,M,cAC/CR,mBAAA,CAUK,MAVLS,UAUK,I,kBATHT,mBAAA,CAQKU,SAAA,QAAAC,WAAA,CARcR,MAAA,CAAAG,SAAS,EAAjBM,IAAI;yBAAfZ,mBAAA,CAQK;MAR0Ba,GAAG,EAAED,IAAI,CAACE,OAAO;MAAEf,KAAK,EAAC;QACtDG,mBAAA,CAAiE;MAA3Da,GAAG,EAAEH,IAAI,CAACI,aAAa;MAAEC,GAAG,EAAC,KAAK;MAAClB,KAAK,EAAC;yCAC/CG,mBAAA,CAKM,OALNgB,UAKM,GAJJhB,mBAAA,CAAgC,YAAAiB,gBAAA,CAAzBP,IAAI,CAACQ,YAAY,kBACxBlB,mBAAA,CAA+C,WAA5C,OAAK,GAAAiB,gBAAA,CAAGP,IAAI,CAACS,aAAa,CAACC,OAAO,qBACrCpB,mBAAA,CAA8B,WAA3B,MAAI,GAAAiB,gBAAA,CAAGP,IAAI,CAACW,QAAQ,kBACvBrB,mBAAA,CAAiE,WAA9D,OAAK,GAAAiB,gBAAA,EAAIP,IAAI,CAACS,aAAa,GAAGT,IAAI,CAACW,QAAQ,EAAED,OAAO,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}