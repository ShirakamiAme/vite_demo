{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport '../../assets/css/SiteHeader.css';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'SiteHeader',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    function goToLogin() {\n      router.push('/login');\n    }\n    const LoginStatus = ref(false);\n    const username = ref('游客');\n    const showLogoutConfirm = ref(false);\n    onMounted(() => {\n      const userJson = localStorage.getItem('user');\n      if (userJson) {\n        try {\n          const user = JSON.parse(userJson);\n          if (user && user.user_name) {\n            username.value = user.user_name;\n            LoginStatus.value = true;\n          }\n        } catch (e) {\n          console.error('解析用户数据失败', e);\n        }\n      }\n    });\n    function toggleLogoutConfirm() {\n      if (LoginStatus.value) {\n        showLogoutConfirm.value = !showLogoutConfirm.value;\n      }\n    }\n    function logout() {\n      localStorage.removeItem('user');\n      localStorage.removeItem('authToken');\n      username.value = '游客';\n      LoginStatus.value = false;\n      showLogoutConfirm.value = false;\n      window.location.href = '/';\n    }\n    const __returned__ = {\n      router,\n      goToLogin,\n      LoginStatus,\n      username,\n      showLogoutConfirm,\n      toggleLogoutConfirm,\n      logout,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","router","goToLogin","push","LoginStatus","username","showLogoutConfirm","userJson","localStorage","getItem","user","JSON","parse","user_name","value","e","console","error","toggleLogoutConfirm","logout","removeItem","window","location","href"],"sources":["D:/计算机/谭/shopping_website/src/components/layout/SiteHeader.vue"],"sourcesContent":["<template>\r\n  <header>\r\n    <div class=\"container header-content\">\r\n      <a href=\"/\" class=\"logo\">\r\n        <font-awesome-icon :icon=\"['fas', 'leaf']\" />\r\n        <span>绿意生活</span>\r\n      </a>\r\n\r\n      <!--form标签的功能暂时不用实现-->\r\n      <form class=\"search\">\r\n        <button type=\"submit\" class=\"search__button\">\r\n          <div class=\"search__icon\">\r\n            <!-- 图标1 -->\r\n          </div>\r\n        </button>\r\n        <input\r\n            type=\"text\"\r\n            class=\"search__input\"\r\n            placeholder=\"搜索商品...\"\r\n            aria-label=\"搜索商品\"\r\n        />\r\n        <button class=\"mic__button\" type=\"button\">\r\n          <div class=\"mic__icon\">\r\n            <!-- 图标2 -->\r\n          </div>\r\n        </button>\r\n        <button class=\"picture__button\" type=\"button\">\r\n          <div class=\"picture__icon\">\r\n            <!-- 图标3 -->\r\n          </div>\r\n        </button>\r\n      </form>\r\n\r\n      <div class=\"nav-icons\">\r\n        <a\r\n            :href=\"LoginStatus ? '#' : '/login'\" :class=\"LoginStatus ? 'logged_in' : 'not_logged_in'\"\r\n            @click.prevent=\"LoginStatus ? toggleLogoutConfirm() : goToLogin()\"\r\n        >\r\n          <font-awesome-icon :icon=\"['fas', 'user']\" />\r\n          <span>{{ username }}</span>\r\n        </a>\r\n\r\n        <div v-if=\"showLogoutConfirm\" class=\"logout-confirm-popup\">\r\n          <p>确定要退出登录吗？</p>\r\n          <button @click=\"logout\">确认退出</button>\r\n          <button @click=\"showLogoutConfirm = false\">取消</button>\r\n        </div>\r\n\r\n        <a href=\"#\" class=\"nav-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'heart']\" />\r\n        </a>\r\n\r\n        <a href=\"/shoppingcart\" class=\"nav-icon cart-icon\">\r\n          <font-awesome-icon :icon=\"['fas', 'shopping-cart']\" />\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </header>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport '../../assets/css/SiteHeader.css'\r\nimport { useRouter } from 'vue-router'\r\nconst router = useRouter()\r\n\r\nfunction goToLogin() {\r\n  router.push('/login')\r\n}\r\n\r\nconst LoginStatus = ref(false)\r\nconst username = ref('游客')\r\nconst showLogoutConfirm = ref(false)\r\n\r\nonMounted(() => {\r\n  const userJson = localStorage.getItem('user')\r\n  if (userJson) {\r\n    try {\r\n      const user = JSON.parse(userJson)\r\n      if (user && user.user_name) {\r\n        username.value = user.user_name\r\n        LoginStatus.value = true\r\n      }\r\n    } catch (e) {\r\n      console.error('解析用户数据失败', e)\r\n    }\r\n  }\r\n})\r\n\r\nfunction toggleLogoutConfirm() {\r\n  if (LoginStatus.value) {\r\n    showLogoutConfirm.value = !showLogoutConfirm.value\r\n  }\r\n}\r\n\r\nfunction logout() {\r\n  localStorage.removeItem('user')\r\n  localStorage.removeItem('authToken')\r\n  username.value = '游客'\r\n  LoginStatus.value = false\r\n  showLogoutConfirm.value = false\r\n  window.location.href = '/'\r\n}\r\n</script>\r\n\r\n\r\n"],"mappings":";AA6DA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAO,iCAAiC;AACxC,SAASC,SAAS,QAAQ,YAAY;;;;;;;IACtC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAE1B,SAASE,SAASA,CAAA,EAAG;MACnBD,MAAM,CAACE,IAAI,CAAC,QAAQ,CAAC;IACvB;IAEA,MAAMC,WAAW,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMO,QAAQ,GAAGP,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMQ,iBAAiB,GAAGR,GAAG,CAAC,KAAK,CAAC;IAEpCC,SAAS,CAAC,MAAM;MACd,MAAMQ,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAC7C,IAAIF,QAAQ,EAAE;QACZ,IAAI;UACF,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,QAAQ,CAAC;UACjC,IAAIG,IAAI,IAAIA,IAAI,CAACG,SAAS,EAAE;YAC1BR,QAAQ,CAACS,KAAK,GAAGJ,IAAI,CAACG,SAAS;YAC/BT,WAAW,CAACU,KAAK,GAAG,IAAI;UAC1B;QACF,CAAC,CAAC,OAAOC,CAAC,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,UAAU,EAAEF,CAAC,CAAC;QAC9B;MACF;IACF,CAAC,CAAC;IAEF,SAASG,mBAAmBA,CAAA,EAAG;MAC7B,IAAId,WAAW,CAACU,KAAK,EAAE;QACrBR,iBAAiB,CAACQ,KAAK,GAAG,CAACR,iBAAiB,CAACQ,KAAK;MACpD;IACF;IAEA,SAASK,MAAMA,CAAA,EAAG;MAChBX,YAAY,CAACY,UAAU,CAAC,MAAM,CAAC;MAC/BZ,YAAY,CAACY,UAAU,CAAC,WAAW,CAAC;MACpCf,QAAQ,CAACS,KAAK,GAAG,IAAI;MACrBV,WAAW,CAACU,KAAK,GAAG,KAAK;MACzBR,iBAAiB,CAACQ,KAAK,GAAG,KAAK;MAC/BO,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}