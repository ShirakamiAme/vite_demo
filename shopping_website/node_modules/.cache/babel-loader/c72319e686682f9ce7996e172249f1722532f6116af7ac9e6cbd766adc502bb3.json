{"ast":null,"code":"import { onMounted, ref, onBeforeUnmount } from 'vue';\nimport { useProductFetch } from '@/composables/useProductFetch.js';\nimport ProductCard from '@/components/common/ProductCard.vue';\nexport default {\n  __name: 'ProductView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      products,\n      loading,\n      error,\n      hasMore,\n      totalItems,\n      fetchProducts\n    } = useProductFetch(20); // üëà ÊØèÈ°µ 20 Êù°ÔºåÊáíÂä†ËΩΩ\n\n    const scrollContainer = ref(null);\n    onMounted(() => {\n      fetchProducts();\n      scrollContainer.value = window;\n      scrollContainer.value.addEventListener('scroll', handleScroll);\n    });\n    onBeforeUnmount(() => {\n      scrollContainer.value?.removeEventListener('scroll', handleScroll);\n    });\n    function handleScroll() {\n      if (loading.value || !hasMore.value) return;\n      const scrollY = window.scrollY;\n      const visibleHeight = window.innerHeight;\n      const pageHeight = document.documentElement.scrollHeight;\n      const threshold = 200;\n      if (scrollY + visibleHeight >= pageHeight - threshold) {\n        fetchProducts();\n      }\n    }\n    function handleAddToCart(item) {\n      console.log('Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶:', item);\n    }\n    const __returned__ = {\n      products,\n      loading,\n      error,\n      hasMore,\n      totalItems,\n      fetchProducts,\n      scrollContainer,\n      handleScroll,\n      handleAddToCart,\n      onMounted,\n      ref,\n      onBeforeUnmount,\n      get useProductFetch() {\n        return useProductFetch;\n      },\n      ProductCard\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","onBeforeUnmount","useProductFetch","ProductCard","products","loading","error","hasMore","totalItems","fetchProducts","scrollContainer","value","window","addEventListener","handleScroll","removeEventListener","scrollY","visibleHeight","innerHeight","pageHeight","document","documentElement","scrollHeight","threshold","handleAddToCart","item","console","log"],"sources":["D:/ËÆ°ÁÆóÊú∫/Ë∞≠/shopping_website/src/views/ProductView.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-view\">\r\n    <h1>ÂÖ®ÈÉ®ÂïÜÂìÅ</h1>\r\n\r\n    <div v-if=\"loading && products.length === 0\" class=\"loading-container\">\r\n      <div class=\"loader\"></div>\r\n      <p>Âä†ËΩΩÂïÜÂìÅ‰∏≠...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"error\" class=\"error-card\">\r\n      <h3>Âä†ËΩΩÂ§±Ë¥•</h3>\r\n      <p>{{ error }}</p>\r\n      <button @click=\"fetchProducts\">ÈáçËØï</button>\r\n    </div>\r\n\r\n    <div v-else-if=\"products.length === 0\" class=\"empty-state\">\r\n      <p>ÊöÇÊó†ÂïÜÂìÅÊï∞ÊçÆ</p>\r\n    </div>\r\n\r\n    <div v-else class=\"product-grid\">\r\n      <ProductCard\r\n          v-for=\"product in products\"\r\n          :key=\"product.id\"\r\n          :product=\"product\"\r\n          @add-to-cart=\"handleAddToCart\"\r\n      />\r\n    </div>\r\n\r\n    <div v-if=\"loading && products.length > 0\" class=\"loading-more\">\r\n      <div class=\"loader small\"></div>\r\n      <p>Âä†ËΩΩÊõ¥Â§öÂïÜÂìÅ‰∏≠...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"!hasMore && products.length > 0\" class=\"no-more\">\r\n      <p>Ê≤°ÊúâÊõ¥Â§öÂïÜÂìÅ‰∫Ü (ÂÖ± {{ totalItems }} ‰ª∂ÂïÜÂìÅ)</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"hasMore && !loading\" class=\"load-more-container\">\r\n      <button @click=\"fetchProducts\" class=\"load-more-btn\">Âä†ËΩΩÊõ¥Â§ö</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, onBeforeUnmount } from 'vue'\r\nimport { useProductFetch } from '@/composables/useProductFetch.js'\r\nimport ProductCard from '@/components/common/ProductCard.vue'\r\n\r\nconst {\r\n  products,\r\n  loading,\r\n  error,\r\n  hasMore,\r\n  totalItems,\r\n  fetchProducts,\r\n} = useProductFetch(20) // üëà ÊØèÈ°µ 20 Êù°ÔºåÊáíÂä†ËΩΩ\r\n\r\nconst scrollContainer = ref(null)\r\n\r\nonMounted(() => {\r\n  fetchProducts()\r\n  scrollContainer.value = window\r\n  scrollContainer.value.addEventListener('scroll', handleScroll)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  scrollContainer.value?.removeEventListener('scroll', handleScroll)\r\n})\r\n\r\nfunction handleScroll() {\r\n  if (loading.value || !hasMore.value) return\r\n  const scrollY = window.scrollY\r\n  const visibleHeight = window.innerHeight\r\n  const pageHeight = document.documentElement.scrollHeight\r\n  const threshold = 200\r\n\r\n  if (scrollY + visibleHeight >= pageHeight - threshold) {\r\n    fetchProducts()\r\n  }\r\n}\r\n\r\nfunction handleAddToCart(item) {\r\n  console.log('Ê∑ªÂä†Âà∞Ë¥≠Áâ©ËΩ¶:', item)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.load-more-container {\r\n  text-align: center;\r\n  margin: 30px 0;\r\n}\r\n\r\n.load-more-btn {\r\n  background: var(--color5);\r\n  color: white;\r\n  border: none;\r\n  padding: 12px 30px;\r\n  border-radius: 30px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.load-more-btn:hover {\r\n  background: var(--color3);\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.no-more p {\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n</style>\r\n"],"mappings":"AA4CA,SAASA,SAAS,EAAEC,GAAG,EAAEC,eAAe,QAAQ,KAAK;AACrD,SAASC,eAAe,QAAQ,kCAAkC;AAClE,OAAOC,WAAW,MAAM,qCAAqC;;;;;;;IAE7D,MAAM;MACJC,QAAQ;MACRC,OAAO;MACPC,KAAK;MACLC,OAAO;MACPC,UAAU;MACVC;IACF,CAAC,GAAGP,eAAe,CAAC,EAAE,CAAC,EAAC;;IAExB,MAAMQ,eAAe,GAAGV,GAAG,CAAC,IAAI,CAAC;IAEjCD,SAAS,CAAC,MAAM;MACdU,aAAa,CAAC,CAAC;MACfC,eAAe,CAACC,KAAK,GAAGC,MAAM;MAC9BF,eAAe,CAACC,KAAK,CAACE,gBAAgB,CAAC,QAAQ,EAAEC,YAAY,CAAC;IAChE,CAAC,CAAC;IAEFb,eAAe,CAAC,MAAM;MACpBS,eAAe,CAACC,KAAK,EAAEI,mBAAmB,CAAC,QAAQ,EAAED,YAAY,CAAC;IACpE,CAAC,CAAC;IAEF,SAASA,YAAYA,CAAA,EAAG;MACtB,IAAIT,OAAO,CAACM,KAAK,IAAI,CAACJ,OAAO,CAACI,KAAK,EAAE;MACrC,MAAMK,OAAO,GAAGJ,MAAM,CAACI,OAAO;MAC9B,MAAMC,aAAa,GAAGL,MAAM,CAACM,WAAW;MACxC,MAAMC,UAAU,GAAGC,QAAQ,CAACC,eAAe,CAACC,YAAY;MACxD,MAAMC,SAAS,GAAG,GAAG;MAErB,IAAIP,OAAO,GAAGC,aAAa,IAAIE,UAAU,GAAGI,SAAS,EAAE;QACrDd,aAAa,CAAC,CAAC;MACjB;IACF;IAEA,SAASe,eAAeA,CAACC,IAAI,EAAE;MAC7BC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,IAAI,CAAC;IAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}