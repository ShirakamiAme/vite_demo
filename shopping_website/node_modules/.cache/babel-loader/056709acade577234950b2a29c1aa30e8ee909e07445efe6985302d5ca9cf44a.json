{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"shopping-cart\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  key: 3\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"üõí ÊàëÁöÑË¥≠Áâ©ËΩ¶\", -1 /* HOISTED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, \"Âä†ËΩΩ‰∏≠...\")) : $setup.error ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($setup.error), 1 /* TEXT */)) : $setup.cartItems.length ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cartItems, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.cart_id\n    }, [_createElementVNode(\"img\", {\n      src: item.image,\n      alt: \"ÂïÜÂìÅÂõæ\",\n      width: \"50\"\n    }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"strong\", null, _toDisplayString(item.name), 1 /* TEXT */), _createTextVNode(\" Êï∞ÈáèÔºö\" + _toDisplayString(item.quantity) + \" Âçï‰ª∑Ôºö¬•\" + _toDisplayString(item.price_at_add.toFixed(2)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_6, \"Ë¥≠Áâ©ËΩ¶‰∏∫Á©∫\"))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$setup","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","cartItems","length","_hoisted_4","_Fragment","_renderList","item","key","cart_id","src","image","alt","width","name","quantity","price_at_add","toFixed","_hoisted_6"],"sources":["D:\\ËÆ°ÁÆóÊú∫\\Ë∞≠\\shopping_website\\src\\views\\ShoppingCart.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, ref, computed } from 'vue';\r\nimport { fetchCartByUserId } from '@/api/cart';\r\nimport axios from '@/api/axios';\r\n\r\nconst cartItems = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\n// ‰ªé localStorage Ëé∑ÂèñÁî®Êà∑ÂêçÔºà‰πüÂèØËÉΩ‰ªé Pinia Êàñ Vuex Ëé∑ÂèñÔºâ\r\nconst username = localStorage.getItem('username');  // ÂÅáËÆæ‰Ω†Âú®ÁôªÂΩïÂêéÂ≠òÂÇ®‰∫ÜÁî®Êà∑Âêç\r\n\r\nconst isLoggedIn = computed(() => !!username);\r\n\r\nconst fetchUserIdAndCart = async () => {\r\n  if (!isLoggedIn.value) {\r\n    error.value = 'Áî®Êà∑Êú™ÁôªÂΩï';\r\n    loading.value = false;\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // 1. ÈÄöËøáÁî®Êà∑ÂêçÊü•Áî®Êà∑ID\r\n    const userRes = await axios.get(`/users?username=${username}`);\r\n    const user = userRes.data.data?.[0]; // Êé•Âè£ËøîÂõûÁöÑÊòØÊï∞ÁªÑËøòÊòØÂØπË±°ÔºåÊ†πÊçÆÂÆûÈôÖË∞ÉÊï¥\r\n\r\n    if (!user || !user.user_id) {\r\n      throw new Error('Áî®Êà∑‰ø°ÊÅØËé∑ÂèñÂ§±Ë¥•');\r\n    }\r\n\r\n    // 2. ÊãâÂèñË¥≠Áâ©ËΩ¶\r\n    const cartRes = await fetchCartByUserId(user.user_id);\r\n    cartItems.value = cartRes.data.data;\r\n\r\n  } catch (err) {\r\n    console.error('‚ùå Âä†ËΩΩÂ§±Ë¥•:', err);\r\n    error.value = 'Âä†ËΩΩË¥≠Áâ©ËΩ¶Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  fetchUserIdAndCart();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"shopping-cart\">\r\n    <h2>üõí ÊàëÁöÑË¥≠Áâ©ËΩ¶</h2>\r\n\r\n    <p v-if=\"loading\">Âä†ËΩΩ‰∏≠...</p>\r\n    <p v-else-if=\"error\">{{ error }}</p>\r\n\r\n    <ul v-else-if=\"cartItems.length\">\r\n      <li v-for=\"item in cartItems\" :key=\"item.cart_id\">\r\n        <img :src=\"item.image\" alt=\"ÂïÜÂìÅÂõæ\" width=\"50\"/>\r\n        <strong>{{ item.name }}</strong>\r\n        Êï∞ÈáèÔºö{{ item.quantity }}\r\n        Âçï‰ª∑Ôºö¬•{{ item.price_at_add.toFixed(2) }}\r\n      </li>\r\n    </ul>\r\n\r\n    <p v-else>Ë¥≠Áâ©ËΩ¶‰∏∫Á©∫</p>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.shopping-cart {\r\n  padding: 16px;\r\n}\r\n\r\nimg {\r\n  margin-right: 8px;\r\n}\r\n</style>\r\n"],"mappings":";;EAgDOA,KAAK,EAAC;AAAe;;;;;;;;;;;;;;;uBAA1BC,mBAAA,CAgBM,OAhBNC,UAgBM,G,0BAfJC,mBAAA,CAAiB,YAAb,UAAQ,sBAEHC,MAAA,CAAAC,OAAO,I,cAAhBJ,mBAAA,CAA4B,KAAAK,UAAA,EAAV,QAAM,KACVF,MAAA,CAAAG,KAAK,I,cAAnBN,mBAAA,CAAoC,KAAAO,UAAA,EAAAC,gBAAA,CAAZL,MAAA,CAAAG,KAAK,oBAEdH,MAAA,CAAAM,SAAS,CAACC,MAAM,I,cAA/BV,mBAAA,CAOK,MAAAW,UAAA,I,kBANHX,mBAAA,CAKKY,SAAA,QAAAC,WAAA,CALcV,MAAA,CAAAM,SAAS,EAAjBK,IAAI;yBAAfd,mBAAA,CAKK;MAL0Be,GAAG,EAAED,IAAI,CAACE;QACvCd,mBAAA,CAA6C;MAAvCe,GAAG,EAAEH,IAAI,CAACI,KAAK;MAAEC,GAAG,EAAC,KAAK;MAACC,KAAK,EAAC;yCACvClB,mBAAA,CAAgC,gBAAAM,gBAAA,CAArBM,IAAI,CAACO,IAAI,kB,iBAAY,MAC7B,GAAAb,gBAAA,CAAGM,IAAI,CAACQ,QAAQ,IAAG,OAClB,GAAAd,gBAAA,CAAGM,IAAI,CAACS,YAAY,CAACC,OAAO,oB;qDAIpCxB,mBAAA,CAAmB,KAAAyB,UAAA,EAAT,OAAK,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}