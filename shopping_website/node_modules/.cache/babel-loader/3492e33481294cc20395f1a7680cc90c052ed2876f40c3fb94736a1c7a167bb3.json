{"ast":null,"code":"import { onMounted, watch, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useProductFetch } from '@/composables/useProductFetch.js';\nimport ProductCard from '@/components/common/ProductCard.vue';\nimport 'src/assets/css/category.css';\nexport default {\n  __name: 'CategoryView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const category = route.params.category;\n    const {\n      products,\n      loading,\n      error,\n      hasMore,\n      fetchProducts,\n      reset\n    } = useProductFetch();\n    const categoryName = computed(() => {\n      if (!category) return null;\n      return decodeURIComponent(category);\n    });\n    const fetchCategoryProducts = () => {\n      reset();\n      fetchProducts(category);\n    };\n    onMounted(() => {\n      fetchCategoryProducts();\n    });\n    watch(() => route.params.category, newCategory => {\n      if (newCategory !== category) {\n        fetchCategoryProducts();\n      }\n    });\n    function handleAddToCart(item) {\n      console.log('添加到购物车:', item);\n    }\n    const __returned__ = {\n      route,\n      category,\n      products,\n      loading,\n      error,\n      hasMore,\n      fetchProducts,\n      reset,\n      categoryName,\n      fetchCategoryProducts,\n      handleAddToCart,\n      onMounted,\n      watch,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get useProductFetch() {\n        return useProductFetch;\n      },\n      ProductCard\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","watch","computed","useRoute","useProductFetch","ProductCard","route","category","params","products","loading","error","hasMore","fetchProducts","reset","categoryName","decodeURIComponent","fetchCategoryProducts","newCategory","handleAddToCart","item","console","log"],"sources":["D:/计算机/谭/shopping_website/src/views/CategoryView.vue"],"sourcesContent":["<template>\r\n  <div class=\"category-view\">\r\n    <h1>{{ categoryName || '所有分类' }}</h1>\r\n\r\n    <div v-if=\"loading && products.length === 0\" class=\"loading-container\">\r\n      <div class=\"loader\"></div>\r\n      <p>加载商品中...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"error\" class=\"error-card\">\r\n      <h3>加载失败</h3>\r\n      <p>{{ error }}</p>\r\n      <button @click=\"fetchCategoryProducts\">重试</button>\r\n    </div>\r\n\r\n    <div v-else-if=\"products.length === 0\" class=\"empty-state\">\r\n      <p>该分类下暂无商品</p>\r\n    </div>\r\n\r\n    <div v-else class=\"product-grid\">\r\n      <ProductCard\r\n          v-for=\"product in products\"\r\n          :key=\"product.id\"\r\n          :product=\"product\"\r\n          @add-to-cart=\"handleAddToCart\"\r\n      />\r\n    </div>\r\n\r\n    <div v-if=\"loading && products.length > 0\" class=\"loading-more\">\r\n      <div class=\"loader small\"></div>\r\n      <p>加载更多商品中...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"!hasMore && products.length > 0\" class=\"no-more\">\r\n      <p>没有更多商品了</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, watch, computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { useProductFetch } from '@/composables/useProductFetch.js'\r\nimport ProductCard from '@/components/common/ProductCard.vue'\r\n\r\nimport 'src/assets/css/category.css'\r\n\r\nconst route = useRoute()\r\nconst category = route.params.category\r\n\r\nconst {\r\n  products,\r\n  loading,\r\n  error,\r\n  hasMore,\r\n  fetchProducts,\r\n  reset\r\n} = useProductFetch()\r\n\r\nconst categoryName = computed(() => {\r\n  if (!category) return null\r\n  return decodeURIComponent(category)\r\n})\r\n\r\nconst fetchCategoryProducts = () => {\r\n  reset()\r\n  fetchProducts(category)\r\n}\r\n\r\nonMounted(() => {\r\n  fetchCategoryProducts()\r\n})\r\n\r\nwatch(() => route.params.category, (newCategory) => {\r\n  if (newCategory !== category) {\r\n    fetchCategoryProducts()\r\n  }\r\n})\r\n\r\nfunction handleAddToCart(item) {\r\n  console.log('添加到购物车:', item)\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.category-view {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n</style>\r\n"],"mappings":"AAwCA,SAASA,SAAS,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,KAAK;AAChD,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAASC,eAAe,QAAQ,kCAAkC;AAClE,OAAOC,WAAW,MAAM,qCAAqC;AAE7D,OAAO,6BAA6B;;;;;;;IAEpC,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,MAAMI,QAAQ,GAAGD,KAAK,CAACE,MAAM,CAACD,QAAQ;IAEtC,MAAM;MACJE,QAAQ;MACRC,OAAO;MACPC,KAAK;MACLC,OAAO;MACPC,aAAa;MACbC;IACF,CAAC,GAAGV,eAAe,CAAC,CAAC;IAErB,MAAMW,YAAY,GAAGb,QAAQ,CAAC,MAAM;MAClC,IAAI,CAACK,QAAQ,EAAE,OAAO,IAAI;MAC1B,OAAOS,kBAAkB,CAACT,QAAQ,CAAC;IACrC,CAAC,CAAC;IAEF,MAAMU,qBAAqB,GAAGA,CAAA,KAAM;MAClCH,KAAK,CAAC,CAAC;MACPD,aAAa,CAACN,QAAQ,CAAC;IACzB,CAAC;IAEDP,SAAS,CAAC,MAAM;MACdiB,qBAAqB,CAAC,CAAC;IACzB,CAAC,CAAC;IAEFhB,KAAK,CAAC,MAAMK,KAAK,CAACE,MAAM,CAACD,QAAQ,EAAGW,WAAW,IAAK;MAClD,IAAIA,WAAW,KAAKX,QAAQ,EAAE;QAC5BU,qBAAqB,CAAC,CAAC;MACzB;IACF,CAAC,CAAC;IAEF,SAASE,eAAeA,CAACC,IAAI,EAAE;MAC7BC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,IAAI,CAAC;IAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}