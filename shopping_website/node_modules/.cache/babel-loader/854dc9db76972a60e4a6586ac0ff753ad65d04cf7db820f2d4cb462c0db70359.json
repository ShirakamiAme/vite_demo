{"ast":null,"code":"import axios from 'axios';\nconst instance = axios.create({\n  baseURL: 'http://localhost:3000/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\ninstance.interceptors.request.use(config => {\n  const fullUrl = `${config.baseURL}${config.url}`;\n  console.log(`[AXIOS] 请求发送: ${config.method.toUpperCase()} ${fullUrl}`);\n  console.log('请求配置:', config);\n  return config;\n}, error => {\n  console.error('[AXIOS] 请求错误:', error);\n  return Promise.reject(error);\n});\ninstance.interceptors.response.use(response => {\n  console.log(`[AXIOS] 响应接收: ${response.status} ${response.config.url}`);\n  return response;\n}, error => {\n  console.error('[AXIOS] 响应错误:', error);\n  if (error.response) {\n    console.error('错误详情:', {\n      status: error.response.status,\n      data: error.response.data,\n      headers: error.response.headers\n    });\n  } else {\n    console.error('错误信息:', error.message);\n  }\n  return Promise.reject(error);\n});\n\n// 请求拦截器 - 添加认证令牌\ninstance.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器 - 统一错误处理\ninstance.interceptors.response.use(response => response, error => {\n  if (error.response) {\n    // 处理特定状态码\n    if (error.response.status === 401) {\n      console.error('认证失败，请重新登录');\n      // 可以在这里触发登出逻辑\n    } else if (error.response.status === 403) {\n      console.error('没有访问权限');\n    }\n  }\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","instance","create","baseURL","timeout","headers","interceptors","request","use","config","fullUrl","url","console","log","method","toUpperCase","error","Promise","reject","response","status","data","message","token","localStorage","getItem","Authorization"],"sources":["D:/计算机/谭/shopping_website/src/api/axios.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'http://localhost:3000/api',\r\n    timeout: 10000,\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n})\r\n\r\ninstance.interceptors.request.use(config => {\r\n    const fullUrl = `${config.baseURL}${config.url}`\r\n    console.log(`[AXIOS] 请求发送: ${config.method.toUpperCase()} ${fullUrl}`)\r\n    console.log('请求配置:', config)\r\n    return config\r\n}, error => {\r\n    console.error('[AXIOS] 请求错误:', error)\r\n    return Promise.reject(error)\r\n})\r\n\r\ninstance.interceptors.response.use(response => {\r\n    console.log(`[AXIOS] 响应接收: ${response.status} ${response.config.url}`)\r\n    return response\r\n}, error => {\r\n    console.error('[AXIOS] 响应错误:', error)\r\n    if (error.response) {\r\n        console.error('错误详情:', {\r\n            status: error.response.status,\r\n            data: error.response.data,\r\n            headers: error.response.headers\r\n        })\r\n    } else {\r\n        console.error('错误信息:', error.message)\r\n    }\r\n    return Promise.reject(error)\r\n})\r\n\r\n// 请求拦截器 - 添加认证令牌\r\ninstance.interceptors.request.use(\r\n    config => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    error => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 响应拦截器 - 统一错误处理\r\ninstance.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        if (error.response) {\r\n            // 处理特定状态码\r\n            if (error.response.status === 401) {\r\n                console.error('认证失败，请重新登录');\r\n                // 可以在这里触发登出逻辑\r\n            } else if (error.response.status === 403) {\r\n                console.error('没有访问权限');\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC1BC,OAAO,EAAE,2BAA2B;EACpCC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AAEFJ,QAAQ,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACxC,MAAMC,OAAO,GAAG,GAAGD,MAAM,CAACN,OAAO,GAAGM,MAAM,CAACE,GAAG,EAAE;EAChDC,OAAO,CAACC,GAAG,CAAC,iBAAiBJ,MAAM,CAACK,MAAM,CAACC,WAAW,CAAC,CAAC,IAAIL,OAAO,EAAE,CAAC;EACtEE,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEJ,MAAM,CAAC;EAC5B,OAAOA,MAAM;AACjB,CAAC,EAAEO,KAAK,IAAI;EACRJ,OAAO,CAACI,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACrC,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAEFf,QAAQ,CAACK,YAAY,CAACa,QAAQ,CAACX,GAAG,CAACW,QAAQ,IAAI;EAC3CP,OAAO,CAACC,GAAG,CAAC,iBAAiBM,QAAQ,CAACC,MAAM,IAAID,QAAQ,CAACV,MAAM,CAACE,GAAG,EAAE,CAAC;EACtE,OAAOQ,QAAQ;AACnB,CAAC,EAAEH,KAAK,IAAI;EACRJ,OAAO,CAACI,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;EACrC,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAChBP,OAAO,CAACI,KAAK,CAAC,OAAO,EAAE;MACnBI,MAAM,EAAEJ,KAAK,CAACG,QAAQ,CAACC,MAAM;MAC7BC,IAAI,EAAEL,KAAK,CAACG,QAAQ,CAACE,IAAI;MACzBhB,OAAO,EAAEW,KAAK,CAACG,QAAQ,CAACd;IAC5B,CAAC,CAAC;EACN,CAAC,MAAM;IACHO,OAAO,CAACI,KAAK,CAAC,OAAO,EAAEA,KAAK,CAACM,OAAO,CAAC;EACzC;EACA,OAAOL,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;;AAEF;AACAf,QAAQ,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7BC,MAAM,IAAI;EACN,MAAMc,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACPd,MAAM,CAACJ,OAAO,CAACqB,aAAa,GAAG,UAAUH,KAAK,EAAE;EACpD;EACA,OAAOd,MAAM;AACjB,CAAC,EACDO,KAAK,IAAI;EACL,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;;AAED;AACAf,QAAQ,CAACK,YAAY,CAACa,QAAQ,CAACX,GAAG,CAC9BW,QAAQ,IAAIA,QAAQ,EACpBH,KAAK,IAAI;EACL,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAChB;IACA,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MAC/BR,OAAO,CAACI,KAAK,CAAC,YAAY,CAAC;MAC3B;IACJ,CAAC,MAAM,IAAIA,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MACtCR,OAAO,CAACI,KAAK,CAAC,QAAQ,CAAC;IAC3B;EACJ;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CACJ,CAAC;AAED,eAAef,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}