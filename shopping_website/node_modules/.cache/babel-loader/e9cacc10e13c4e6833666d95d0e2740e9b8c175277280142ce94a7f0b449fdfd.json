{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { loginUser, registerUser } from '@/api/user';\nexport default {\n  __name: 'LoginAndRegister',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const store = useStore();\n    const isLogin = ref(true);\n    const showPassword = ref(false);\n    const showConfirmPassword = ref(false);\n    const rememberMe = ref(false);\n    const isLoading = ref(false);\n    const errorMessage = ref('');\n    const formData = reactive({\n      name: '',\n      email: '',\n      password: '',\n      confirmPassword: ''\n    });\n    const submitForm = async () => {\n      errorMessage.value = '';\n      isLoading.value = true;\n      try {\n        if (isLogin.value) {\n          const response = await loginUser({\n            email: formData.email,\n            password: formData.password\n          });\n          store.commit('SET_USER', response.data.user);\n          store.commit('SET_TOKEN', response.data.token);\n          if (rememberMe.value) {\n            localStorage.setItem('authToken', response.data.token);\n          } else {\n            sessionStorage.setItem('authToken', response.data.token);\n          }\n          alert(`登录成功，欢迎回来${response.data.user.user_name}`);\n          router.push('/');\n        } else {\n          if (formData.password !== formData.confirmPassword) {\n            throw new Error('两次输入的密码不一致');\n          }\n          const response = await registerUser({\n            user_name: formData.name,\n            email: formData.email,\n            user_password: formData.password\n          });\n          store.commit('SET_USER', response.data.user);\n          store.commit('SET_TOKEN', response.data.token);\n          localStorage.setItem('authToken', response.data.token);\n          alert(`注册成功，欢迎${response.data.user.user_name}`);\n          router.push('/');\n        }\n        formData.name = '';\n        formData.email = '';\n        formData.password = '';\n        formData.confirmPassword = '';\n      } catch (error) {\n        errorMessage.value = error.response?.data?.message || error.message || '请求失败，请重试';\n        console.error('请求错误:', error);\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const __returned__ = {\n      router,\n      store,\n      isLogin,\n      showPassword,\n      showConfirmPassword,\n      rememberMe,\n      isLoading,\n      errorMessage,\n      formData,\n      submitForm,\n      ref,\n      reactive,\n      get useRouter() {\n        return useRouter;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get loginUser() {\n        return loginUser;\n      },\n      get registerUser() {\n        return registerUser;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","useRouter","useStore","loginUser","registerUser","router","store","isLogin","showPassword","showConfirmPassword","rememberMe","isLoading","errorMessage","formData","name","email","password","confirmPassword","submitForm","value","response","commit","data","user","token","localStorage","setItem","sessionStorage","alert","user_name","push","Error","user_password","error","message","console"],"sources":["D:/计算机/谭/shopping_website/src/views/LoginAndRegister.vue"],"sourcesContent":["<template>\r\n  <div class=\"auth-container\">\r\n    <div class=\"form-wrapper feathered-edge\">\r\n      <div class=\"form-header\">\r\n        <h1 class=\"app-title\"><font-awesome-icon :icon=\"['fas', 'leaf']\" />绿意生活</h1>\r\n        <h2 class=\"section-title\">{{ isLogin ? '欢迎回来' : '加入我们' }}</h2>\r\n      </div>\r\n\r\n      <div class=\"tabs\">\r\n        <button\r\n            :class=\"['tab-btn', { active: isLogin }]\"\r\n            @click=\"isLogin = true\"\r\n        >\r\n          登录\r\n        </button>\r\n        <button\r\n            :class=\"['tab-btn', { active: !isLogin }]\"\r\n            @click=\"isLogin = false\"\r\n        >\r\n          注册\r\n        </button>\r\n      </div>\r\n\r\n      <form @submit.prevent=\"submitForm\" class=\"auth-form\">\r\n        <div class=\"form-group\" v-if=\"!isLogin\">\r\n          <label for=\"name\">用户名</label>\r\n          <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              v-model=\"formData.name\"\r\n              placeholder=\"输入您的用户名\"\r\n              required\r\n          >\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"email\">邮箱</label>\r\n          <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              v-model=\"formData.email\"\r\n              placeholder=\"输入您的邮箱\"\r\n              required\r\n          >\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"password\">密码</label>\r\n          <input\r\n              :type=\"showPassword ? 'text' : 'password'\"\r\n              id=\"password\"\r\n              v-model=\"formData.password\"\r\n              placeholder=\"输入您的密码\"\r\n              required\r\n          >\r\n          <span class=\"toggle-password\" @click=\"showPassword = !showPassword\">\r\n            <font-awesome-icon :icon=\"[ 'fas', showPassword ? 'eye-slash' : 'eye' ]\" />\r\n          </span>\r\n        </div>\r\n\r\n        <div class=\"form-group\" v-if=\"!isLogin\">\r\n          <label for=\"confirm-password\">确认密码</label>\r\n          <input\r\n              :type=\"showConfirmPassword ? 'text' : 'password'\"\r\n              id=\"confirm-password\"\r\n              v-model=\"formData.confirmPassword\"\r\n              placeholder=\"再次输入密码\"\r\n              required\r\n          >\r\n          <span class=\"toggle-password\" @click=\"showConfirmPassword = !showConfirmPassword\">\r\n            <font-awesome-icon :icon=\"[ 'fas', showPassword ? 'eye-slash' : 'eye' ]\" />\r\n          </span>\r\n        </div>\r\n\r\n        <div class=\"remember-forgot\" v-if=\"isLogin\">\r\n          <label class=\"remember-me\">\r\n            <input type=\"checkbox\" v-model=\"rememberMe\">\r\n            <span>记住我</span>\r\n          </label>\r\n          <a href=\"#\" class=\"forgot-password\">忘记密码?</a>\r\n        </div>\r\n\r\n        <button type=\"submit\" class=\"btn submit-btn\">\r\n          {{ isLogin ? '登录' : '注册' }}\r\n        </button>\r\n\r\n        <div class=\"divider\">\r\n          <span>或</span>\r\n        </div>\r\n\r\n        <div class=\"social-login\">\r\n          <button type=\"button\" class=\"social-btn google\">\r\n            <font-awesome-icon :icon=\"['fab', 'qq']\" />\r\n            QQ登录\r\n          </button>\r\n          <button type=\"button\" class=\"social-btn facebook\">\r\n            <font-awesome-icon :icon=\"['fab', 'weixin']\" />\r\n            微信登录\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      <p class=\"toggle-form\">\r\n        {{ isLogin ? '还没有账号?' : '已有账号?' }}\r\n        <a href=\"#\" @click.prevent=\"isLogin = !isLogin\">\r\n          {{ isLogin ? '立即注册' : '立即登录' }}\r\n        </a>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from 'vuex';\r\nimport { loginUser, registerUser } from '@/api/user';\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst isLogin = ref(true);\r\nconst showPassword = ref(false);\r\nconst showConfirmPassword = ref(false);\r\nconst rememberMe = ref(false);\r\nconst isLoading = ref(false);\r\nconst errorMessage = ref('');\r\n\r\nconst formData = reactive({\r\n  name: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: ''\r\n});\r\n\r\nconst submitForm = async () => {\r\n  errorMessage.value = '';\r\n  isLoading.value = true;\r\n\r\n  try {\r\n    if (isLogin.value) {\r\n      const response = await loginUser({\r\n        email: formData.email,\r\n        password: formData.password\r\n      });\r\n\r\n      store.commit('SET_USER', response.data.user);\r\n      store.commit('SET_TOKEN', response.data.token);\r\n\r\n      if (rememberMe.value) {\r\n        localStorage.setItem('authToken', response.data.token);\r\n      } else {\r\n        sessionStorage.setItem('authToken', response.data.token);\r\n      }\r\n\r\n      alert(`登录成功，欢迎回来${response.data.user.user_name}`);\r\n      router.push('/');\r\n    } else {\r\n      if (formData.password !== formData.confirmPassword) {\r\n        throw new Error('两次输入的密码不一致');\r\n      }\r\n\r\n      const response = await registerUser({\r\n        user_name: formData.name,\r\n        email: formData.email,\r\n        user_password: formData.password\r\n      });\r\n\r\n      store.commit('SET_USER', response.data.user);\r\n      store.commit('SET_TOKEN', response.data.token);\r\n      localStorage.setItem('authToken', response.data.token);\r\n\r\n      alert(`注册成功，欢迎${response.data.user.user_name}`);\r\n      router.push('/');\r\n    }\r\n\r\n    formData.name = '';\r\n    formData.email = '';\r\n    formData.password = '';\r\n    formData.confirmPassword = '';\r\n  } catch (error) {\r\n    errorMessage.value = error.response?.data?.message || error.message || '请求失败，请重试';\r\n    console.error('请求错误:', error);\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.error-message {\r\n  color: #e74c3c;\r\n  background-color: #fdeded;\r\n  padding: 10px 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 15px;\r\n  text-align: center;\r\n  font-size: 14px;\r\n}\r\n\r\n.loading-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(255, 255, 255, 0.8);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 10;\r\n  border-radius: 20px;\r\n}\r\n\r\n.loading-spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid #42b983;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.auth-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  padding: 20px;\r\n  background-color: var(--color1);\r\n}\r\n\r\n.form-wrapper {\r\n  width: 100%;\r\n  max-width: 500px;\r\n  background-color: white;\r\n  border-radius: 20px;\r\n  padding: 40px;\r\n  box-shadow: var(--shadow);\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.form-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.app-title {\r\n  font-family: 'Playfair Display', serif;\r\n  font-size: 36px;\r\n  color: var(--color5);\r\n  margin-bottom: 10px;\r\n  letter-spacing: -0.5px;\r\n}\r\n\r\n.section-title {\r\n  font-family: 'Playfair Display', serif;\r\n  font-size: 28px;\r\n  color: var(--color4);\r\n  margin-bottom: 15px;\r\n  position: relative;\r\n}\r\n\r\n.section-title::after {\r\n  content: \"\";\r\n  display: block;\r\n  width: 60px;\r\n  height: 3px;\r\n  background: var(--color3);\r\n  margin: 10px auto;\r\n  border-radius: 2px;\r\n}\r\n\r\n.tabs {\r\n  display: flex;\r\n  margin-bottom: 25px;\r\n  border-bottom: 1px solid var(--color2);\r\n}\r\n\r\n.tab-btn {\r\n  flex: 1;\r\n  padding: 12px 0;\r\n  background: none;\r\n  border: none;\r\n  font-family: 'Noto Sans SC', sans-serif;\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  color: var(--color5);\r\n  cursor: pointer;\r\n  transition: var(--transition);\r\n  position: relative;\r\n}\r\n\r\n.tab-btn.active {\r\n  color: var(--color4);\r\n  font-weight: 700;\r\n}\r\n\r\n.tab-btn.active::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  bottom: -1px;\r\n  left: 0;\r\n  right: 0;\r\n  height: 3px;\r\n  background: var(--color4);\r\n}\r\n\r\n.auth-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n}\r\n\r\n.form-group {\r\n  position: relative;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: 500;\r\n  color: var(--color5);\r\n}\r\n\r\n.form-group input {\r\n  width: 100%;\r\n  padding: 14px 16px;\r\n  border: 1px solid var(--color2);\r\n  border-radius: 10px;\r\n  font-family: 'Noto Sans SC', sans-serif;\r\n  font-size: 16px;\r\n  transition: var(--transition);\r\n  background-color: rgba(210, 221, 148, 0.1);\r\n}\r\n\r\n.form-group input:focus {\r\n  outline: none;\r\n  border-color: var(--color3);\r\n  box-shadow: 0 0 0 3px rgba(171, 192, 92, 0.2);\r\n}\r\n\r\n.toggle-password {\r\n  position: absolute;\r\n  right: 15px;\r\n  top: 60px;\r\n  transform: translateY(-50%);\r\n  cursor: pointer;\r\n  color: var(--color4);\r\n}\r\n\r\n.icon {\r\n  font-size: 18px;\r\n}\r\n\r\n.remember-forgot {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: -10px;\r\n}\r\n\r\n.remember-me {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n}\r\n\r\n.remember-me input {\r\n  accent-color: var(--color4);\r\n}\r\n\r\n.forgot-password {\r\n  color: var(--color4);\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  transition: var(--transition);\r\n}\r\n\r\n.forgot-password:hover {\r\n  color: var(--color5);\r\n  text-decoration: underline;\r\n}\r\n\r\n.submit-btn {\r\n  width: 100%;\r\n  margin-top: 10px;\r\n  font-size: 18px;\r\n  padding: 16px;\r\n}\r\n\r\n.divider {\r\n  position: relative;\r\n  text-align: center;\r\n  margin: 20px 0;\r\n}\r\n\r\n.divider::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  height: 1px;\r\n  background: var(--color2);\r\n  z-index: 1;\r\n}\r\n\r\n.divider span {\r\n  display: inline-block;\r\n  position: relative;\r\n  padding: 0 15px;\r\n  background: white;\r\n  color: var(--color4);\r\n  z-index: 2;\r\n  font-size: 14px;\r\n}\r\n\r\n.social-login {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.social-btn {\r\n  flex: 1;\r\n  padding: 12px;\r\n  border-radius: 30px;\r\n  border: 1px solid var(--color2);\r\n  background: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  font-family: 'Noto Sans SC', sans-serif;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: var(--transition);\r\n}\r\n\r\n.social-btn:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: var(--shadow);\r\n}\r\n\r\n.google {\r\n  color: #DB4437;\r\n}\r\n\r\n.google:hover {\r\n  background: rgba(219, 68, 55, 0.05);\r\n  border-color: #DB4437;\r\n}\r\n\r\n.facebook {\r\n  color: #4267B2;\r\n}\r\n\r\n.facebook:hover {\r\n  background: rgba(66, 103, 178, 0.05);\r\n  border-color: #4267B2;\r\n}\r\n\r\n.toggle-form {\r\n  text-align: center;\r\n  color: var(--color5);\r\n  margin-top: 25px;\r\n}\r\n\r\n.toggle-form a {\r\n  color: var(--color4);\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  transition: var(--transition);\r\n}\r\n\r\n.toggle-form a:hover {\r\n  color: var(--color5);\r\n  text-decoration: underline;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .form-wrapper {\r\n    padding: 30px;\r\n  }\r\n\r\n  .app-title {\r\n    font-size: 32px;\r\n  }\r\n\r\n  .section-title {\r\n    font-size: 24px;\r\n  }\r\n\r\n  .social-login {\r\n    flex-direction: column;\r\n  }\r\n}\r\n\r\n@media (max-width: 576px) {\r\n  .form-wrapper {\r\n    padding: 25px 20px;\r\n  }\r\n\r\n  .app-title {\r\n    font-size: 28px;\r\n  }\r\n\r\n  .section-title {\r\n    font-size: 22px;\r\n  }\r\n\r\n  .tab-btn {\r\n    font-size: 16px;\r\n  }\r\n\r\n  .submit-btn {\r\n    padding: 14px;\r\n    font-size: 16px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}