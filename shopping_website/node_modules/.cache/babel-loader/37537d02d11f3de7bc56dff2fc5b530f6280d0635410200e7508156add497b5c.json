{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"product-card\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"product-badge\"\n};\nconst _hoisted_3 = {\n  class: \"product-info\"\n};\nconst _hoisted_4 = {\n  class: \"product-rating\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"product-price\"\n};\nconst _hoisted_6 = {\n  class: \"original-price\"\n};\nconst _hoisted_7 = {\n  class: \"discount-price\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"normal-price\"\n};\nconst _hoisted_9 = {\n  class: \"add-to-cart\"\n};\nconst _hoisted_10 = {\n  class: \"quantity\"\n};\nconst _hoisted_11 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.product.badge ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($props.product.badge), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n    class: \"product-img\",\n    style: _normalizeStyle({\n      backgroundImage: `url(${$props.product.image})`\n    })\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, _toDisplayString($props.product.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, i => {\n    return _createVNode(_component_font_awesome_icon, {\n      key: i,\n      icon: $setup.getStarIcon(i),\n      class: _normalizeClass({\n        'half-star': i === $setup.currentCeilRating && $setup.hasHalfStar\n      })\n    }, null, 8 /* PROPS */, [\"icon\", \"class\"]);\n  }), 64 /* STABLE_FRAGMENT */)), _createElementVNode(\"span\", null, \"(\" + _toDisplayString($props.product.reviews) + \")\", 1 /* TEXT */)]), $props.product.discountPrice ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"span\", _hoisted_6, _toDisplayString($props.product.originalPrice), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_7, _toDisplayString($props.product.discountPrice), 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString($props.product.price), 1 /* TEXT */)), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    onClick: $setup.decrement\n  }, \"-\"), _createElementVNode(\"span\", null, _toDisplayString($setup.quantity), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.increment\n  }, \"+\")]), _createElementVNode(\"button\", {\n    class: \"cart-btn\",\n    onClick: $setup.handleAddToCart,\n    disabled: $setup.isAddingToCart\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'shopping-cart']\n  })], 8 /* PROPS */, _hoisted_11)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$props","product","badge","_hoisted_2","_toDisplayString","_createElementVNode","style","_normalizeStyle","backgroundImage","image","_hoisted_3","name","_hoisted_4","_Fragment","_renderList","i","_createVNode","_component_font_awesome_icon","key","icon","$setup","getStarIcon","_normalizeClass","currentCeilRating","hasHalfStar","reviews","discountPrice","_hoisted_5","_hoisted_6","originalPrice","_hoisted_7","_hoisted_8","price","_hoisted_9","_hoisted_10","onClick","decrement","quantity","increment","handleAddToCart","disabled","isAddingToCart"],"sources":["D:\\计算机\\谭\\shopping_website\\src\\components\\common\\ProductCard.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-card\">\r\n    <div class=\"product-badge\" v-if=\"product.badge\">{{ product.badge }}</div>\r\n    <div class=\"product-img\" :style=\"{ backgroundImage: `url(${product.image})` }\"></div>\r\n    <div class=\"product-info\">\r\n      <h3>{{ product.name }}</h3>\r\n      <div class=\"product-rating\">\r\n        <font-awesome-icon\r\n            v-for=\"i in 5\"\r\n            :key=\"i\"\r\n            :icon=\"getStarIcon(i)\"\r\n            :class=\"{ 'half-star': i === currentCeilRating && hasHalfStar }\"\r\n        />\r\n        <span>({{ product.reviews }})</span>\r\n      </div>\r\n      <div class=\"product-price\" v-if=\"product.discountPrice\">\r\n        <span class=\"original-price\">{{ product.originalPrice }}</span>\r\n        <span class=\"discount-price\">{{ product.discountPrice }}</span>\r\n      </div>\r\n      <div class=\"normal-price\" v-else>{{ product.price }}</div>\r\n      <div class=\"add-to-cart\">\r\n        <div class=\"quantity\">\r\n          <button @click=\"decrement\">-</button>\r\n          <span>{{ quantity }}</span>\r\n          <button @click=\"increment\">+</button>\r\n        </div>\r\n        <button class=\"cart-btn\" @click=\"handleAddToCart\" :disabled=\"isAddingToCart\">\r\n          <font-awesome-icon :icon=\"['fas', 'shopping-cart']\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\n\r\nconst props = defineProps({\r\n  product: {\r\n    type: Object,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst MAX_QUANTITY = 10\r\nconst quantity = ref(1)\r\nconst isAddingToCart = ref(false)\r\nconst emit = defineEmits(['add-to-cart'])\r\n\r\n// 缓存 rating 计算结果\r\nconst ratingFloor = computed(() => Math.floor(props.product.rating))\r\nconst ratingCeil = computed(() => Math.ceil(props.product.rating))\r\nconst hasHalfStar = computed(() => props.product.rating % 1 !== 0)\r\n\r\nconst currentCeilRating = computed(() => ratingCeil.value)\r\n\r\nfunction getStarIcon(index) {\r\n  if (index <= ratingFloor.value) {\r\n    return ['fas', 'star'];\r\n  } else if (index === ratingCeil.value && hasHalfStar.value) {\r\n    return ['fas', 'star-half-alt'];\r\n  } else {\r\n    return ['far', 'star'];\r\n  }\r\n}\r\n\r\nfunction increment() {\r\n  if (quantity.value < MAX_QUANTITY) quantity.value++\r\n}\r\n\r\nfunction decrement() {\r\n  if (quantity.value > 1) quantity.value--\r\n}\r\n\r\nfunction handleAddToCart() {\r\n  if (isAddingToCart.value) return\r\n  isAddingToCart.value = true\r\n  addToCart()\r\n  setTimeout(() => {\r\n    isAddingToCart.value = false\r\n  }, 1000)\r\n}\r\n\r\nfunction addToCart() {\r\n  emit('add-to-cart', {\r\n    ...props.product,\r\n    quantity: quantity.value\r\n  })\r\n}\r\n</script>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAc;;;EAClBA,KAAK,EAAC;;;EAENA,KAAK,EAAC;AAAc;;EAElBA,KAAK,EAAC;AAAgB;;;EAStBA,KAAK,EAAC;;;EACHA,KAAK,EAAC;AAAgB;;EACtBA,KAAK,EAAC;AAAgB;;;EAEzBA,KAAK,EAAC;;;EACNA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAU;;;;uBApB3BC,mBAAA,CA8BM,OA9BNC,UA8BM,GA7B6BC,MAAA,CAAAC,OAAO,CAACC,KAAK,I,cAA9CJ,mBAAA,CAAyE,OAAzEK,UAAyE,EAAAC,gBAAA,CAAtBJ,MAAA,CAAAC,OAAO,CAACC,KAAK,oB,mCAChEG,mBAAA,CAAqF;IAAhFR,KAAK,EAAC,aAAa;IAAES,KAAK,EAAAC,eAAA;MAAAC,eAAA,SAA4BR,MAAA,CAAAC,OAAO,CAACQ,KAAK;IAAA;2BACxEJ,mBAAA,CA0BM,OA1BNK,UA0BM,GAzBJL,mBAAA,CAA2B,YAAAD,gBAAA,CAApBJ,MAAA,CAAAC,OAAO,CAACU,IAAI,kBACnBN,mBAAA,CAQM,OARNO,UAQM,I,cAPJd,mBAAA,CAKEe,SAAA,QAAAC,WAAA,CAJc,CAAC,EAANC,CAAC;WADZC,YAAA,CAKEC,4BAAA;MAHGC,GAAG,EAAEH,CAAC;MACNI,IAAI,EAAEC,MAAA,CAAAC,WAAW,CAACN,CAAC;MACnBlB,KAAK,EAAAyB,eAAA;QAAA,aAAiBP,CAAC,KAAKK,MAAA,CAAAG,iBAAiB,IAAIH,MAAA,CAAAI;MAAW;;kCAEjEnB,mBAAA,CAAoC,cAA9B,GAAC,GAAAD,gBAAA,CAAGJ,MAAA,CAAAC,OAAO,CAACwB,OAAO,IAAG,GAAC,gB,GAEEzB,MAAA,CAAAC,OAAO,CAACyB,aAAa,I,cAAtD5B,mBAAA,CAGM,OAHN6B,UAGM,GAFJtB,mBAAA,CAA+D,QAA/DuB,UAA+D,EAAAxB,gBAAA,CAA/BJ,MAAA,CAAAC,OAAO,CAAC4B,aAAa,kBACrDxB,mBAAA,CAA+D,QAA/DyB,UAA+D,EAAA1B,gBAAA,CAA/BJ,MAAA,CAAAC,OAAO,CAACyB,aAAa,iB,oBAEvD5B,mBAAA,CAA0D,OAA1DiC,UAA0D,EAAA3B,gBAAA,CAAtBJ,MAAA,CAAAC,OAAO,CAAC+B,KAAK,mBACjD3B,mBAAA,CASM,OATN4B,UASM,GARJ5B,mBAAA,CAIM,OAJN6B,WAIM,GAHJ7B,mBAAA,CAAqC;IAA5B8B,OAAK,EAAEf,MAAA,CAAAgB;EAAS,GAAE,GAAC,GAC5B/B,mBAAA,CAA2B,cAAAD,gBAAA,CAAlBgB,MAAA,CAAAiB,QAAQ,kBACjBhC,mBAAA,CAAqC;IAA5B8B,OAAK,EAAEf,MAAA,CAAAkB;EAAS,GAAE,GAAC,E,GAE9BjC,mBAAA,CAES;IAFDR,KAAK,EAAC,UAAU;IAAEsC,OAAK,EAAEf,MAAA,CAAAmB,eAAe;IAAGC,QAAQ,EAAEpB,MAAA,CAAAqB;MAC3DzB,YAAA,CAAsDC,4BAAA;IAAlCE,IAAI,EAAE;EAAwB,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}