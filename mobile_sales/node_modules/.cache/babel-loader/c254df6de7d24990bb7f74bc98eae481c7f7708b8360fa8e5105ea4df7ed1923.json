{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { ref } from 'vue';\nimport Tabs from './components/AppTabs.vue';\nimport ProductList from './components/ProductList.vue';\nimport Cart from './components/ShoppingCart.vue';\nimport { products as productList } from './data/products.js';\nexport default {\n  components: {\n    Tabs,\n    ProductList,\n    Cart\n  },\n  setup() {\n    const currentTab = ref('products');\n    const tabs = [{\n      id: 'products',\n      name: '商品列表'\n    }, {\n      id: 'cart',\n      name: '购物车'\n    }];\n    const products = ref(productList);\n    const cart = ref([{\n      id: 1,\n      name: '高端机械键盘 Cherry轴体',\n      price: 899,\n      quantity: 1,\n      selected: false\n    }, {\n      id: 2,\n      name: '无线蓝牙耳机 主动降噪',\n      price: 1299,\n      quantity: 2,\n      selected: true\n    }]);\n    const removeFromCart = id => {\n      const index = cart.value.findIndex(item => item.id === id);\n      if (index !== -1) cart.value.splice(index, 1);\n    };\n    const handleAddToCart = ({\n      product,\n      quantity\n    }) => {\n      const item = cart.value.find(i => i.id === product.id);\n      if (item) {\n        const maxAdd = product.stock - item.quantity;\n        const addQty = Math.min(quantity, maxAdd);\n        if (addQty > 0) {\n          item.quantity += addQty;\n          const prod = products.value.find(p => p.id === product.id);\n          if (prod) prod.stock -= addQty;\n          alert(`成功添加 ${addQty} 个 \"${product.name}\" 到购物车！`);\n        } else {\n          alert('该商品库存不足');\n        }\n      } else {\n        const addQty = Math.min(quantity, product.stock);\n        if (addQty > 0) {\n          cart.value.push({\n            id: product.id,\n            name: product.name,\n            price: product.price,\n            quantity: addQty,\n            selected: true\n          });\n          const prod = products.value.find(p => p.id === product.id);\n          if (prod) prod.stock -= addQty;\n          alert(`成功添加 ${addQty} 个 \"${product.name}\" 到购物车！`);\n        } else {\n          alert('该商品库存不足');\n        }\n      }\n    };\n    return {\n      currentTab,\n      tabs,\n      products,\n      cart,\n      removeFromCart,\n      handleAddToCart\n    };\n  }\n};","map":{"version":3,"names":["ref","Tabs","ProductList","Cart","products","productList","components","setup","currentTab","tabs","id","name","cart","price","quantity","selected","removeFromCart","index","value","findIndex","item","splice","handleAddToCart","product","find","i","maxAdd","stock","addQty","Math","min","prod","p","alert","push"],"sources":["D:\\计算机\\谭\\mobile_sales\\src\\App.vue"],"sourcesContent":["<template>\n  <div>\n    <Tabs :tabs=\"tabs\" v-model:currentTab=\"currentTab\" />\n\n    <main class=\"container\">\n      <ProductList\n          v-if=\"currentTab === 'products'\"\n          :products=\"products\"\n          @add-to-cart=\"handleAddToCart\"\n      />\n      <Cart\n          v-else\n          :cart=\"cart\"\n          @remove=\"removeFromCart\"\n      />\n    </main>\n  </div>\n</template>\n\n<script>\nimport {ref} from 'vue';\nimport Tabs from './components/AppTabs.vue';\nimport ProductList from './components/ProductList.vue';\nimport Cart from './components/ShoppingCart.vue';\nimport {products as productList} from './data/products.js';\n\nexport default {\n  components: {Tabs, ProductList, Cart},\n  setup() {\n    const currentTab = ref('products');\n    const tabs = [\n      {id: 'products', name: '商品列表'},\n      {id: 'cart', name: '购物车'}\n    ];\n\n    const products = ref(productList);\n\n    const cart = ref([\n      {id: 1, name: '高端机械键盘 Cherry轴体', price: 899, quantity: 1, selected: false},\n      {id: 2, name: '无线蓝牙耳机 主动降噪', price: 1299, quantity: 2, selected: true}\n    ]);\n\n    const removeFromCart = (id) => {\n      const index = cart.value.findIndex(item => item.id === id);\n      if (index !== -1) cart.value.splice(index, 1);\n    };\n\n    const handleAddToCart = ({ product, quantity }) => {\n      const item = cart.value.find(i => i.id === product.id);\n      if (item) {\n        const maxAdd = product.stock - item.quantity;\n        const addQty = Math.min(quantity, maxAdd);\n        if (addQty > 0) {\n          item.quantity += addQty;\n          const prod = products.value.find(p => p.id === product.id);\n          if (prod) prod.stock -= addQty;\n\n          alert(`成功添加 ${addQty} 个 \"${product.name}\" 到购物车！`);\n        } else {\n          alert('该商品库存不足');\n        }\n      } else {\n        const addQty = Math.min(quantity, product.stock);\n        if (addQty > 0) {\n          cart.value.push({\n            id: product.id,\n            name: product.name,\n            price: product.price,\n            quantity: addQty,\n            selected: true,\n          });\n          const prod = products.value.find(p => p.id === product.id);\n          if (prod) prod.stock -= addQty;\n\n          alert(`成功添加 ${addQty} 个 \"${product.name}\" 到购物车！`);\n        } else {\n          alert('该商品库存不足');\n        }\n      }\n    };\n\n\n    return {\n      currentTab,\n      tabs,\n      products,\n      cart,\n      removeFromCart,\n      handleAddToCart,\n    };\n  }\n};\n</script>\n\n<style>\n@import './assets/styles.css';\n\ninput[type=\"number\"]::-webkit-inner-spin-button,\ninput[type=\"number\"]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=\"number\"] {\n  -moz-appearance: textfield;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}